import{j as e}from"./app-DzAc3SyI.js";import{R as _}from"./RegistrarLayout--DpTH5KF.js";import{r as u,b as v,H as w,L as b}from"./inertia-Clk-cdek.js";import"./vendor-DNWpyu2A.js";/* empty css            */import"./Footer-rVbWSTwk.js";import"./heroicons-CTwCrMww.js";import"./menu-BcEDE3vj.js";import"./portal-CZK08gWH.js";import"./transition-Cw_pkg33.js";function L({assessmentType:d,grades:l}){const[g,c]=u.useState([]),[o,x]=u.useState([]),{data:t,setData:i,put:j,processing:p,errors:r}=v({name:d.name||"",grade_id:d.grade_id||"",section_id:d.section_id||"",subject_id:d.subject_id||"",weight:d.weight||"",description:d.description||""});u.useEffect(()=>{if(t.grade_id){const s=l.find(a=>a.id==t.grade_id);c(s?.sections||[])}t.grade_id&&t.section_id&&h(t.grade_id,t.section_id)},[]);const h=async(s,a)=>{try{const m=await(await fetch(`/registrar/assessment-types/subjects?grade_id=${s}&section_id=${a}`)).json();x(m)}catch(n){console.error("Error fetching subjects:",n)}},f=s=>{const a=s.target.value;if(i("grade_id",a),i("section_id",""),i("subject_id",""),c([]),x([]),a){const n=l.find(m=>m.id==a);c(n?.sections||[])}},y=async s=>{const a=s.target.value;i("section_id",a),i("subject_id",""),x([]),a&&t.grade_id&&h(t.grade_id,a)},N=s=>{s.preventDefault(),j(route("registrar.assessment-types.update",d.id))};return e.jsxs(_,{children:[e.jsx(w,{title:"Edit Assessment Type"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"EDIT ASSESSMENT TYPE"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Edit › Assessment Type"})]}),e.jsx(b,{href:route("registrar.assessment-types.index"),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"← Back"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-6",children:"Edit Assessment Type"}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Assessment Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.name,onChange:s=>i("name",s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Midterm Exam, Final Exam, Quiz 1"}),r.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Class (Grade) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:t.grade_id,onChange:f,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"-- Select Class --"}),l.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),r.grade_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.grade_id})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Section ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:t.section_id,onChange:y,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!t.grade_id||g.length===0,required:!0,children:[e.jsx("option",{value:"",children:"-- Select Section --"}),g.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),!t.grade_id&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Please select a class first"}),r.section_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.section_id})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Subject ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:t.subject_id,onChange:s=>i("subject_id",s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:!t.section_id||o.length===0,required:!0,children:[e.jsx("option",{value:"",children:"-- Select Subject --"}),o.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),!t.section_id&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Please select a section first"}),t.section_id&&o.length===0&&e.jsx("p",{className:"mt-1 text-xs text-orange-500",children:"No subjects found for this section"}),r.subject_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.subject_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weight (%)"}),e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:t.weight,onChange:s=>i("weight",s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 30"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Percentage weight in final grade calculation"}),r.weight&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.weight})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:t.description,onChange:s=>i("description",s.target.value),rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Optional description"}),r.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r.description})]}),e.jsxs("div",{className:"pt-4 flex gap-3",children:[e.jsx("button",{type:"submit",disabled:p,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:p?"Updating...":"Update Assessment Type"}),e.jsx(b,{href:route("registrar.assessment-types.index"),className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})]})})]})}export{L as default};
