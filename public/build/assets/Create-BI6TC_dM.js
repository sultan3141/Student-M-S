import{j as e}from"./app-B2S3Wz0d.js";import{r as o,b as _,H as k,a as S}from"./inertia-Clk-cdek.js";import{T as C}from"./TeacherLayout-DasbyfBQ.js";import{I as $,au as M,av as E}from"./heroicons-CTwCrMww.js";import"./vendor-DNWpyu2A.js";/* empty css            */import"./Footer-C9OBh2Gh.js";import"./ErrorBoundary-Ctj5hp_u.js";import"./menu-BcEDE3vj.js";import"./portal-CZK08gWH.js";import"./transition-Cw_pkg33.js";function A({data:d,setData:n,years:l}){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-blue-700",children:"Please select the academic year for this mark entry."})})]})}),e.jsxs("div",{className:"max-w-xs",children:[e.jsx("label",{htmlFor:"academic_year",className:"block text-sm font-medium text-gray-700",children:"Academic Year"}),e.jsxs("select",{id:"academic_year",value:d.academic_year_id,onChange:r=>n("academic_year_id",r.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"Select Year"}),l.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]})]})}function D({data:d,setData:n,grades:l}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Select Grade Level"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Choose the grade you want to enter marks for"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:l.map(r=>e.jsxs("button",{onClick:()=>n("grade_id",r.id),className:`
                            relative flex flex-col items-center justify-center p-6 rounded-xl border-2 transition-all duration-200
                            ${d.grade_id===r.id?"border-blue-500 bg-blue-50 text-blue-700 ring-2 ring-blue-200":"border-gray-100 bg-white text-gray-600 hover:border-gray-200 hover:bg-gray-50"}
                        `,children:[e.jsx("div",{className:`p-3 rounded-full mb-3 ${d.grade_id===r.id?"bg-blue-200 text-blue-700":"bg-gray-100 text-gray-500"}`,children:e.jsx($,{className:"h-8 w-8"})}),e.jsx("span",{className:"font-bold text-lg",children:r.name})]},r.id))})]})}function F({data:d,setData:n,students:l}){const[r,c]=o.useState(d.marks||{});o.useEffect(()=>{if(Object.keys(r).length===0&&l.length>0){const t={};l.forEach(a=>{t[a.id]={student_id:a.id,score:""}}),c(t)}},[l]),o.useEffect(()=>{n("marks",Object.values(r))},[r]);const m=(t,a)=>{a!==""&&(isNaN(a)||a<0||a>100)||c(i=>({...i,[t]:{student_id:t,score:a}}))},x=(t,a)=>{if(t.key==="Enter"||t.key==="ArrowDown"){t.preventDefault();const i=document.querySelector(`input[data-index="${a+1}"]`);i&&i.focus()}if(t.key==="ArrowUp"){t.preventDefault();const i=document.querySelector(`input[data-index="${a-1}"]`);i&&i.focus()}};return e.jsxs("div",{className:"bg-white shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("div",{className:"bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-12 px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[e.jsx("div",{className:"col-span-1",children:"#"}),e.jsx("div",{className:"col-span-5",children:"Student"}),e.jsx("div",{className:"col-span-2",children:"ID"}),e.jsx("div",{className:"col-span-4",children:"Score (0-100)"})]})}),e.jsx("div",{className:"bg-white divide-y divide-gray-200",children:l.map((t,a)=>e.jsxs("div",{className:"grid grid-cols-12 px-6 py-4 items-center hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"col-span-1 text-sm text-gray-500",children:a+1}),e.jsxs("div",{className:"col-span-5 flex items-center",children:[e.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:e.jsx("img",{className:"h-10 w-10 rounded-full object-cover",src:t.photo||`https://ui-avatars.com/api/?name=${t.name}&background=random`,alt:""})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"font-medium text-gray-900",children:t.name})})]}),e.jsx("div",{className:"col-span-2 text-sm text-gray-500 font-mono",children:t.student_id_number}),e.jsx("div",{className:"col-span-4",children:e.jsx("input",{type:"number",min:"0",max:"100","data-index":a,value:r[t.id]?.score||"",onChange:i=>m(t.id,i.target.value),onKeyDown:i=>x(i,a),className:`
                                        block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm
                                        ${r[t.id]?.score<0||r[t.id]?.score>100?"border-red-300 text-red-900 focus:border-red-500 focus:ring-red-500":""}
                                    `,placeholder:"Enter score"})})]},t.id))})]}),l.length===0&&e.jsx("div",{className:"p-12 text-center text-gray-500",children:"No students found in this section."})]})}function P({assignments:d,currentAcademicYear:n,assessmentTypes:l}){const[r,c]=o.useState(1),[m,x]=o.useState([]),t=[...new Map(d.map(s=>[s.grade.id,s.grade])).values()],{data:a,setData:i,post:b,processing:u,errors:R}=_({academic_year_id:n,grade_id:"",section_id:"",subject_id:"",semester:"1",assessment_type_id:"",marks:[]}),h=[{id:1,name:"Academic Year"},{id:2,name:"Grade"},{id:3,name:"Section"},{id:4,name:"Subject"},{id:5,name:"Details"},{id:6,name:"Enter Marks"}],p=async()=>{if(a.section_id&&a.subject_id)try{const s=await S.get(route("teacher.marks.students"),{params:{section_id:a.section_id,subject_id:a.subject_id}});x(s.data)}catch(s){console.error("Failed to fetch students",s)}},f=()=>{r===5&&p(),c(r+1)},j=()=>c(r-1),v=s=>{s.preventDefault(),b(route("teacher.marks.store"))},g=d.filter(s=>!(r>2&&a.grade_id&&s.grade_id!=a.grade_id||r>3&&a.section_id&&s.section_id!=a.section_id)),y=()=>[...new Map(g.map(s=>[s.section.id,s.section])).values()],N=()=>[...new Map(g.map(s=>[s.subject.id,s.subject])).values()];return e.jsxs(C,{children:[e.jsx(k,{title:"Mark Entry"}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("nav",{"aria-label":"Progress",className:"mb-8",children:e.jsx("ol",{role:"list",className:"flex items-center",children:h.map((s,w)=>e.jsxs("li",{className:`relative ${w!==h.length-1?"pr-8 sm:pr-20":""}`,children:[s.id<r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:e.jsx("div",{className:"h-0.5 w-full bg-blue-600"})}),e.jsx("div",{className:"relative flex h-8 w-8 items-center justify-center rounded-full bg-blue-600 hover:bg-blue-900",children:e.jsx("svg",{className:"h-5 w-5 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}):s.id===r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:e.jsx("div",{className:"h-0.5 w-full bg-gray-200"})}),e.jsx("div",{className:"relative flex h-8 w-8 items-center justify-center rounded-full border-2 border-blue-600 bg-white","aria-current":"step",children:e.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-blue-600"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:e.jsx("div",{className:"h-0.5 w-full bg-gray-200"})}),e.jsx("div",{className:"relative flex h-8 w-8 items-center justify-center rounded-full border-2 border-gray-300 bg-white hover:border-gray-400",children:e.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-transparent group-hover:bg-gray-300"})})]}),e.jsx("div",{className:"absolute -bottom-8 left-1/2 -translate-x-1/2 w-max text-xs font-medium text-gray-500",children:s.name})]},s.name))})}),e.jsxs("div",{className:"bg-white px-4 py-5 shadow sm:rounded-lg sm:p-6 mt-12",children:[r===1&&e.jsx(A,{data:a,setData:i,years:[{id:2026,name:"2025-2026"}]}),r===2&&e.jsx(D,{data:a,setData:i,grades:t}),r===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Select Section"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:y().map(s=>e.jsxs("button",{onClick:()=>i("section_id",s.id),className:`p-4 border rounded-lg text-left ${a.section_id==s.id?"border-blue-500 bg-blue-50 ring-1 ring-blue-500":"hover:bg-gray-50"}`,children:[e.jsx("span",{className:"font-bold block",children:s.name}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Gender: ",s.gender]})]},s.id))})]}),r===4&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Select Subject"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:N().map(s=>e.jsxs("button",{onClick:()=>i("subject_id",s.id),className:`p-6 border rounded-lg flex flex-col items-center justify-center gap-2 ${a.subject_id==s.id?"border-blue-500 bg-blue-50 ring-1 ring-blue-500":"hover:bg-gray-50"}`,children:[e.jsx("span",{className:"text-3xl",children:"ðŸ“š"}),e.jsx("span",{className:"font-medium text-center",children:s.name}),e.jsx("span",{className:"text-xs text-gray-400",children:s.code})]},s.id))})]}),r===5&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Semester"}),e.jsx("div",{className:"mt-2 flex gap-4",children:["1","2"].map(s=>e.jsxs("button",{onClick:()=>i("semester",s),className:`flex-1 py-3 px-4 border rounded-md ${a.semester===s?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:["Semester ",s]},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assessment Type"}),e.jsx("div",{className:"mt-2 grid grid-cols-2 gap-3 sm:grid-cols-4",children:l.map(s=>e.jsx("button",{onClick:()=>i("assessment_type_id",s.id),className:`py-2 px-3 text-sm font-medium border rounded-md ${a.assessment_type_id===s.id?"bg-indigo-600 text-white shadow-sm":"bg-white text-gray-700 hover:bg-gray-50"}`,children:s.name},s.id))})]})]}),r===6&&e.jsx(F,{data:a,setData:i,students:m}),e.jsxs("div",{className:"mt-8 pt-5 border-t border-gray-200 flex justify-between",children:[e.jsxs("button",{type:"button",onClick:j,disabled:r===1,className:`inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none ${r===1?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(M,{className:"-ml-1 mr-2 h-5 w-5"}),"Back"]}),r<6?e.jsxs("button",{type:"button",onClick:f,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:["Next",e.jsx(E,{className:"ml-2 -mr-1 h-5 w-5"})]}):e.jsx("button",{type:"button",onClick:v,disabled:u,className:"inline-flex items-center px-6 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:u?"Saving...":"Submit Marks"})]})]})]})]})}export{P as default};
