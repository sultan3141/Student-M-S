import{j as e}from"./app-DR2vn0Ou.js";import{r as l,H as j}from"./inertia-Clk-cdek.js";import{T as f}from"./TeacherLayout-BQdRo2Pk.js";import{ay as u,az as N,aA as b,aB as y}from"./heroicons-CTwCrMww.js";import"./vendor-DNWpyu2A.js";/* empty css            */import"./Footer-xgBc-P8m.js";import"./ErrorBoundary-fz_7TGlW.js";import"./menu-BcEDE3vj.js";import"./portal-CZK08gWH.js";import"./transition-Cw_pkg33.js";function v({classId:r,subject:t,initialData:n=null}){const[i,x]=l.useState(n?.rankings||[]),[a,o]=l.useState(n?.stats||{}),[m,d]=l.useState(!n);l.useEffect(()=>{n||g()},[r,t]);const g=async()=>{try{d(!0);const c=await(await fetch(route("teacher.rankings.live",{classId:r,subject:t,semester:"1",academic_year:"2024-2025"}))).json();x(c.rankings),o(c.stats)}catch(s){console.error("Failed to fetch rankings:",s)}finally{d(!1)}},h=s=>{switch(s){case 1:return e.jsx("span",{className:"text-2xl",children:"ðŸ¥‡"});case 2:return e.jsx("span",{className:"text-xl",children:"ðŸ¥ˆ"});case 3:return e.jsx("span",{className:"text-xl",children:"ðŸ¥‰"});default:return e.jsxs("span",{className:"font-bold text-gray-500",children:["#",s]})}},p=s=>{switch(s){case"up":return e.jsx(y,{className:"w-4 h-4 text-green-500"});case"down":return e.jsx(b,{className:"w-4 h-4 text-red-500"});default:return e.jsx(N,{className:"w-4 h-4 text-gray-400"})}};return m?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading rankings..."}):e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4 border-b border-gray-100 flex justify-between items-center",children:[e.jsxs("h2",{className:"text-lg font-bold text-white flex items-center",children:[e.jsx(u,{className:"w-5 h-5 mr-2 text-yellow-300"}),"Live Ranking Preview"]}),e.jsx("span",{className:"text-xs font-semibold text-indigo-100 bg-white/20 px-2 py-1 rounded-lg",children:t})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Top 5 in Class"}),e.jsxs("div",{className:"space-y-3",children:[i.map((s,c)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors border border-gray-100 hover:border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 flex justify-center",children:h(s.rank_position)}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:s.student?.user?.name||"Unknown Student"}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[p(s.trend),e.jsx("span",{className:"ml-1 capitalize",children:s.trend})," since last exam"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-lg font-black text-indigo-600",children:[Number(s.average_score).toFixed(1),"%"]})})]},c)),i.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No marks entered yet."})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 border-t border-gray-100 pt-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Class Avg"}),e.jsxs("p",{className:"text-xl font-bold text-gray-900",children:[a.class_average,"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Highest"}),e.jsxs("p",{className:"text-xl font-bold text-green-600",children:[a.highest_score,"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Pass Rate (â‰¥50%)"}),e.jsxs("p",{className:"text-xl font-bold text-blue-600",children:[Math.round((a.above_80+(a.total_students-a.above_80-a.below_50))/(a.total_students||1)*100),"%"]})]})]})]})]})}function I({classes:r}){return e.jsxs(f,{children:[e.jsx(j,{title:"Class Rankings"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900",children:"Class Rankings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time performance standings and statistics"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:r.map(t=>e.jsx(v,{classId:t.id,subject:t.subject},t.id))})]})}export{I as default};
