import{j as e}from"./app-Q_kb9OZV.js";import{u as G,r as i,b as H,H as W,a as k,L as S}from"./inertia-Clk-cdek.js";import{D as K}from"./DirectorLayout-DEHwt1Ov.js";import{E as z,S as V,T as J,I as Q,U as X}from"./heroicons-CTwCrMww.js";import"./vendor-DNWpyu2A.js";/* empty css            */import"./Footer-BBofczhO.js";import"./menu-BcEDE3vj.js";import"./portal-CZK08gWH.js";import"./transition-Cw_pkg33.js";function ye(){const{grades:g}=G().props,[M,u]=i.useState(!1),[x,E]=i.useState(""),[d,C]=i.useState(""),[y,N]=i.useState([]),[Y,w]=i.useState("table"),[Z,ee]=i.useState(""),[te,se]=i.useState(""),[re,ae]=i.useState([{start_time:"08:10",end_time:"08:30",monday:"",tuesday:"",wednesday:"",thursday:"",friday:""},{start_time:"08:30",end_time:"09:15",monday:"",tuesday:"",wednesday:"",thursday:"",friday:""},{start_time:"09:20",end_time:"10:05",monday:"",tuesday:"",wednesday:"",thursday:"",friday:""},{start_time:"10:10",end_time:"10:55",monday:"",tuesday:"",wednesday:"",thursday:"",friday:""},{start_time:"11:00",end_time:"11:45",monday:"",tuesday:"",wednesday:"",thursday:"",friday:""},{start_time:"11:50",end_time:"12:35",monday:"",tuesday:"",wednesday:"",thursday:"",friday:""},{start_time:"13:25",end_time:"14:10",monday:"",tuesday:"",wednesday:"",thursday:"",friday:""},{start_time:"14:15",end_time:"15:00",monday:"",tuesday:"",wednesday:"",thursday:"",friday:""}]),[p,f]=i.useState(null),[T,v]=i.useState(!1),[l,j]=i.useState({start:"",end:"",activity:"",oldStart:"",oldEnd:""}),{data:b,setData:m,post:D,put:F,delete:I,processing:A,errors:c,reset:P}=H({grade_id:"",section_id:"",day_of_week:"Monday",start_time:"",end_time:"",activity:"",monday_activity:"",tuesday_activity:"",wednesday_activity:"",thursday_activity:"",friday_activity:""}),h=()=>{d?k.get(route("director.schedule.section",d)).then(t=>{N(t.data)}).catch(t=>{console.error("Error fetching schedule:",t),N([])}):N([])};i.useEffect(()=>{h()},[d]);const O=t=>{f(t),w("single"),m({grade_id:t.grade_id,section_id:t.section_id,day_of_week:t.day_of_week,start_time:t.start_time?.substring(0,5),end_time:t.end_time?.substring(0,5),activity:t.activity,monday_activity:"",tuesday_activity:"",wednesday_activity:"",thursday_activity:"",friday_activity:""}),u(!0)},$=t=>{confirm("Are you sure you want to delete this schedule?")&&I(route("director.schedule.destroy",t),{onSuccess:()=>{h()}})},q=t=>{t.preventDefault(),p?F(route("director.schedule.update",p.id),{onSuccess:()=>{u(!1),h(),f(null),P()}}):D(route("director.schedule.store"),{onSuccess:()=>{u(!1),h(),P()}})},L=t=>{let s="";Object.values(y).forEach(r=>{Array.isArray(r)&&r.forEach(a=>{a.start_time?.substring(0,5)===t.start&&a.end_time?.substring(0,5)===t.end&&(s=a.activity)})}),j({start:t.start,end:t.end,activity:s,oldStart:t.start,oldEnd:t.end}),v(!0)},R=t=>{t.preventDefault();const s=[];if(Object.values(y).forEach(r=>{Array.isArray(r)&&r.forEach(a=>{a.start_time?.substring(0,5)===l.oldStart&&a.end_time?.substring(0,5)===l.oldEnd&&s.push(a)})}),s.length===0){v(!1);return}Promise.all(s.map(r=>k.put(route("director.schedule.update",r.id),{grade_id:r.grade_id,section_id:r.section_id,day_of_week:r.day_of_week,start_time:l.start,end_time:l.end,activity:l.activity}))).then(()=>{v(!1),h(),alert("Period and subjects updated successfully!")}).catch(r=>{console.error("Error updating period:",r),alert("Error updating period. Please check the logs.")})},U=t=>{const s=new URLSearchParams;x&&s.append("grade_id",x),d&&s.append("section_id",d),window.location.href=route(`director.schedule.export-${t}`)+"?"+s.toString()};g.find(t=>t.id==b.grade_id)?.sections;const B=g.find(t=>t.id==x)?.sections||[];return e.jsxs(K,{children:[e.jsx(W,{title:"School Schedule"}),e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-900",style:{color:"#0F172A"},children:"ğŸ“… School Program Schedule"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:d?"Manage and view class schedules":"Select a class to manage its schedule"})]}),e.jsxs("div",{className:"flex space-x-3",children:[d&&e.jsxs("button",{onClick:()=>{C(""),E("")},className:"flex items-center space-x-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium border border-gray-200",children:[e.jsx(z,{className:"h-5 w-5"}),e.jsx("span",{children:"Back to All Classes"})]}),e.jsxs("button",{onClick:()=>U("pdf"),className:"flex items-center space-x-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-medium",children:[e.jsx(V,{className:"h-5 w-5"}),e.jsx("span",{children:"Export PDF"})]})]})]})}),!d&&e.jsx("div",{className:"space-y-8",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(t=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"bg-gray-50 px-5 py-3 border-b border-gray-100 flex items-center space-x-2",children:[e.jsx(J,{className:"h-5 w-5 text-blue-500"}),e.jsx("h3",{className:"font-bold text-gray-800",children:t.name})]}),e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.sections?.map(s=>e.jsxs("button",{onClick:()=>{E(t.id),C(s.id)},className:"flex items-center justify-between px-4 py-3 bg-white border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all group",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-4 w-4 text-gray-400 group-hover:text-blue-500"}),e.jsx("div",{className:"flex flex-col items-start",children:e.jsx("span",{className:"text-sm font-medium text-gray-700 group-hover:text-blue-600",children:s.name})})]}),e.jsx(X,{className:"h-4 w-4 text-gray-300 group-hover:text-blue-400"})]},s.id)),(!t.sections||t.sections.length===0)&&e.jsx("p",{className:"text-xs text-gray-400 italic col-span-2",children:"No sections available"})]})})]},t.id))})}),d&&e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h3",{className:"text-2xl font-bold mb-6 text-center",children:["CLASS SCHEDULE - ",g.find(t=>t.id==x)?.name," ",B.find(t=>t.id==d)?.name]}),e.jsx("div",{className:"mb-4 flex justify-end",children:e.jsx("button",{onClick:()=>{f(null),w("single"),m({grade_id:x,section_id:d,day_of_week:"Monday",start_time:"",end_time:"",activity:"",monday_activity:"",tuesday_activity:"",wednesday_activity:"",thursday_activity:"",friday_activity:""}),u(!0)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:"+ Add Time Period"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border-2 border-gray-600",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-200",children:[e.jsx("th",{className:"border-2 border-gray-600 px-6 py-3 text-center font-bold text-gray-700",children:"TIME"}),["Monday","Tuesday","Wednesday","Thursday","Friday"].map(t=>e.jsx("th",{className:"border-2 border-gray-600 px-6 py-3 text-center font-bold text-gray-700",children:t},t)),e.jsx("th",{className:"border-2 border-gray-600 px-4 py-3 text-center font-bold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:(()=>{const t=[];return Object.values(y).forEach(s=>{Array.isArray(s)&&s.forEach(r=>{const a=`${r.start_time?.substring(0,5)}-${r.end_time?.substring(0,5)}`;t.find(n=>n.timeKey===a)||t.push({timeKey:a,start:r.start_time?.substring(0,5),end:r.end_time?.substring(0,5)})})}),t.sort((s,r)=>s.start.localeCompare(r.start)),t.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"7",className:"border-2 border-gray-600 px-4 py-8 text-center text-gray-500",children:[e.jsx("div",{className:"text-lg mb-2",children:"No schedule created yet"}),e.jsx("div",{className:"text-sm",children:'Click "Add Time Period" to create your first schedule entry'})]})}):t.map((s,r)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"border-2 border-gray-600 px-4 py-4 text-center font-semibold bg-gray-100 text-gray-700",children:[s.start," - ",s.end]}),["Monday","Tuesday","Wednesday","Thursday","Friday"].map(a=>{const n=y[a]||[],o=Array.isArray(n)?n.find(_=>_.start_time?.substring(0,5)===s.start&&_.end_time?.substring(0,5)===s.end):null;return e.jsx("td",{className:"border-2 border-gray-600 px-4 py-4 text-center relative group cursor-pointer hover:bg-blue-50 transition-colors min-h-[60px]",onClick:()=>{o?O(o):(f(null),w("single"),m({grade_id:x,section_id:d,day_of_week:a,start_time:s.start,end_time:s.end,activity:"",monday_activity:"",tuesday_activity:"",wednesday_activity:"",thursday_activity:"",friday_activity:""}),u(!0))},children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-semibold text-gray-900 text-base",children:o.activity}),e.jsx("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:_=>{_.stopPropagation(),$(o.id)},className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600 font-medium",children:"âœ•"})})]}):e.jsx("span",{className:"text-gray-300 text-sm group-hover:text-blue-500",children:"Click to add"})},a)}),e.jsx("td",{className:"border-2 border-gray-600 px-2 py-2 text-center bg-gray-50",children:e.jsxs("div",{className:"flex flex-col space-y-2 items-center",children:[e.jsx("button",{onClick:()=>L(s),className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200 font-medium w-full",title:"Edit this time period for all days",children:"Edit Period"}),e.jsx("button",{onClick:()=>{if(confirm(`Delete all entries for time slot ${s.start} - ${s.end}?`)){const a=[];Object.values(y).forEach(n=>{Array.isArray(n)&&n.forEach(o=>{o.start_time?.substring(0,5)===s.start&&o.end_time?.substring(0,5)===s.end&&a.push(o.id)})}),Promise.all(a.map(n=>k.delete(route("director.schedule.destroy",n)))).then(()=>{h()})}},className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded hover:bg-red-200 font-medium w-full",title:"Delete this time period",children:"Delete Period"})]})})]},s.timeKey))})()})]})}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"ğŸ’¡ How to use:"}),' Click "Add Time Period" to create a new time slot. Click on any cell to add/edit subjects. Click "Delete Period" to remove an entire time row. Once saved, this schedule will be visible to all students, parents, and teachers in this class.']})})]})}),M&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:p?"Edit Schedule Entry":"Add Schedule Entry"}),e.jsx("form",{onSubmit:q,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"Time Period"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:b.start_time,onChange:t=>m("start_time",t.target.value),required:!0}),c.start_time&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:c.start_time})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),e.jsx("input",{type:"time",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:b.end_time,onChange:t=>m("end_time",t.target.value),required:!0}),c.end_time&&e.jsx("div",{className:"text-red-500 text-xs mt-1",children:c.end_time})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Day of Week"}),e.jsx("select",{className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:b.day_of_week,onChange:t=>m("day_of_week",t.target.value),required:!0,children:["Monday","Tuesday","Wednesday","Thursday","Friday"].map(t=>e.jsx("option",{value:t,children:t},t))}),c.day_of_week&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:c.day_of_week})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject / Activity"}),e.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-lg px-4 py-3",value:b.activity,onChange:t=>m("activity",t.target.value),placeholder:"e.g. Mathematics, English, P.E.",required:!0,autoFocus:!0}),c.activity&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:c.activity})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 border rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:A,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:A?"Saving...":p?"Update":"Add"})]})]})})]})}),T&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Edit Time Period"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Updating this will change the time for all subjects in this row."}),e.jsx("form",{onSubmit:R,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),e.jsx("input",{type:"time",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:l.start,onChange:t=>j({...l,start:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),e.jsx("input",{type:"time",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",value:l.end,onChange:t=>j({...l,end:t.target.value}),required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject / Activity (For All Days)"}),e.jsx("input",{type:"text",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",placeholder:"e.g. Mathematics, Break, Lunch",value:l.activity,onChange:t=>j({...l,activity:t.target.value}),required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 border rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Update All Entries"})]})]})})]})}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(S,{href:route("director.dashboard"),className:"executive-card hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ğŸ“Š"}),e.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:"Back to Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600",children:"View overall school metrics"})]}),e.jsxs(S,{href:route("director.students.index"),className:"executive-card hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ğŸ‘¥"}),e.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:"Student Directory"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage student information"})]}),e.jsxs(S,{href:route("director.teachers.index"),className:"executive-card hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsx("div",{className:"text-3xl mb-2",children:"ğŸ‘¨â€ğŸ«"}),e.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:"Teacher Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage teacher assignments"})]})]})]})}export{ye as default};
