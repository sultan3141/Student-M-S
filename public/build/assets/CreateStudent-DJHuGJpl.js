import{j as e}from"./app-DzAc3SyI.js";import{u as N,r as n,b as S,a as B,H as E}from"./inertia-Clk-cdek.js";import{R as C}from"./RegistrarLayout--DpTH5KF.js";import"./vendor-DNWpyu2A.js";/* empty css            */import"./Footer-rVbWSTwk.js";import"./heroicons-CTwCrMww.js";import"./menu-BcEDE3vj.js";import"./portal-CZK08gWH.js";import"./transition-Cw_pkg33.js";function Y(){const{grades:d,streams:h}=N().props,[f,P]=n.useState("single"),[o,b]=n.useState("new"),[c,i]=n.useState(""),[p,m]=n.useState([]),[x,u]=n.useState(null),{data:t,setData:a,post:v,processing:g,errors:r,reset:j}=S({name:"",gender:"Female",dob:"",grade_id:d&&d.length>0?d[0].id:"",stream_id:"",previous_school:"",parent_mode:"new",parent_id:"",parent_name:"",parent_email:"",parent_phone:""});n.useEffect(()=>{a("parent_mode",o)},[o]),n.useEffect(()=>{const s=setTimeout(()=>{c.length>2?y():m([])},500);return()=>clearTimeout(s)},[c]);const y=async()=>{try{const s=await B.get(route("registrar.parents.search"),{params:{query:c}});m(s.data)}catch(s){console.error("Parent search failed",s)}},w=s=>{u(s),a("parent_id",s.id),i(s.name),m([])},_=s=>{s.preventDefault(),v(route("registrar.students.store"),{onSuccess:()=>{j(),u(null),i("")}})};return e.jsxs(C,{user:N().props.auth.user,children:[e.jsx(E,{title:"Student Admission Portal"}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-[#E5E7EB] p-6 flex flex-col md:flex-row justify-between items-center",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-[#1F2937] flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üë§"})," STUDENT ADMISSION PORTAL"]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Enrollment for ",new Date().getFullYear(),"-",new Date().getFullYear()+1," Academic Year"]})]})}),r.general&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded shadow-sm",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"text-red-500 text-xl",children:"‚ö†Ô∏è"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700 font-bold",children:r.general})})]})}),f==="single"&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow-sm border border-[#E5E7EB] overflow-hidden",children:[e.jsx("div",{className:"bg-[#1E40AF] px-6 py-3 border-b border-blue-800",children:e.jsx("h3",{className:"font-bold text-white",children:"NEW ADMISSION ENTRY"})}),e.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-[#D4AF37] uppercase tracking-wide mb-3 border-b border-gray-100 pb-2",children:"1. Student Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-700",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.name,onChange:s=>a("name",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-[#228B22] focus:border-[#228B22]",placeholder:"e.g. Amina Mohammed"}),r.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-700",children:["Gender ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:t.gender,onChange:s=>a("gender",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-[#228B22] focus:border-[#228B22]",children:[e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Male",children:"Male"})]}),r.gender&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.gender})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700",children:"Date of Birth"}),e.jsx("input",{type:"date",value:t.dob,onChange:s=>a("dob",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-[#228B22] focus:border-[#228B22]"}),r.dob&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.dob})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-3 border-b border-gray-100 pb-2",children:[e.jsx("h4",{className:"text-sm font-bold text-[#D4AF37] uppercase tracking-wide",children:"2. Guardian Information"}),e.jsxs("div",{className:"flex space-x-2 text-xs",children:[e.jsx("button",{type:"button",onClick:()=>{b("new"),a("parent_id","")},className:`px-3 py-1 rounded-full border ${o==="new"?"bg-blue-100 text-blue-700 border-blue-300":"text-gray-500 hover:bg-gray-50"}`,children:"Create New"}),e.jsx("button",{type:"button",onClick:()=>{b("existing"),a("parent_name","")},className:`px-3 py-1 rounded-full border ${o==="existing"?"bg-blue-100 text-blue-700 border-blue-300":"text-gray-500 hover:bg-gray-50"}`,children:"Link Existing"})]})]}),o==="new"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 p-4 rounded-md border border-gray-200",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Guardian Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:t.parent_name,onChange:s=>a("parent_name",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-[#228B22] focus:border-[#228B22]"}),r.parent_name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.parent_name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Email (Login ID) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:t.parent_email,onChange:s=>a("parent_email",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-[#228B22] focus:border-[#228B22]"}),r.parent_email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.parent_email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),e.jsx("input",{type:"text",value:t.parent_phone,onChange:s=>a("parent_phone",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-[#228B22] focus:border-[#228B22]"}),r.parent_phone&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.parent_phone})]})]}):e.jsxs("div",{className:"bg-blue-50 p-4 rounded-md border border-blue-200",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-1",children:"Search Parent by Name or Email"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:c,onChange:s=>{i(s.target.value),u(null)},className:"block w-full border-blue-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 pl-10",placeholder:"Start typing..."}),e.jsx("span",{className:"absolute left-3 top-2.5 text-gray-400",children:"üîç"}),p.length>0&&!x&&e.jsx("div",{className:"absolute z-10 w-full bg-white shadow-lg rounded-md mt-1 border border-gray-200 max-h-48 overflow-y-auto",children:p.map(s=>e.jsxs("div",{onClick:()=>w(s),className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-50 last:border-0",children:[e.jsx("div",{className:"font-bold text-sm text-gray-800",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.email," ‚Ä¢ ",s.phone]})]},s.id))})]}),x&&e.jsxs("div",{className:"mt-2 text-sm text-green-700 font-medium",children:["‚úì Selected: ",x.name]}),r.parent_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:"Please select a valid parent."})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-[#D4AF37] uppercase tracking-wide mb-3 border-b border-gray-100 pb-2",children:"3. Academic Placement"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-700",children:["Target Class ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:t.grade_id,onChange:s=>a("grade_id",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-[#228B22] focus:border-[#228B22]",children:[d&&d.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id)),(!d||d.length===0)&&e.jsx("option",{value:"",children:"No Classes Defined"})]}),r.grade_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.grade_id})]}),(()=>{const s=d?.find(l=>l.id===parseInt(t.grade_id));return s&&(s.name.includes("11")||s.name.includes("12"))?e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-bold text-gray-700",children:["Stream ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:t.stream_id,onChange:l=>a("stream_id",l.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-[#228B22] focus:border-[#228B22]",children:[e.jsx("option",{value:"",children:"Select Stream"}),h&&h.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}),r.stream_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.stream_id})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Previous School"}),e.jsx("input",{type:"text",value:t.previous_school,onChange:l=>a("previous_school",l.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-[#228B22] focus:border-[#228B22]",placeholder:"Optional"})]})})()]}),(()=>{const s=d?.find(l=>l.id===parseInt(t.grade_id));return s&&(s.name.includes("11")||s.name.includes("12"))?e.jsx("div",{className:"grid grid-cols-1 gap-4 mt-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Previous School"}),e.jsx("input",{type:"text",value:t.previous_school,onChange:l=>a("previous_school",l.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-[#228B22] focus:border-[#228B22]",placeholder:"Optional"})]})}):null})()]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 flex items-center justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>j(),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Reset"}),e.jsx("button",{type:"submit",disabled:g,className:"bg-[#228B22] hover:bg-green-700 text-white font-bold py-2 px-6 rounded-md shadow-md transition-colors",children:g?"Processing...":"Complete Enrollment"})]})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-100",children:[e.jsx("h4",{className:"font-bold text-[#1E40AF] mb-2",children:"Registration Summary"}),e.jsxs("ul",{className:"space-y-3 text-sm text-blue-800",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:"üìù"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Mode:"})," ",o==="new"?"New Family Enrollment":"Existing Family Add-on"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:"üë§"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold",children:"Student:"})," ",t.name||"..."]})]})]})]})})]})]})]})}export{Y as default};
