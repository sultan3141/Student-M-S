import{j as e}from"./app-GMuDqh-e.js";import{r as a,H as u,d as j}from"./inertia-Clk-cdek.js";import{R as y}from"./RegistrarLayout-LsBxDnMY.js";import"./vendor-DNWpyu2A.js";/* empty css            */import"./Footer-BRfk2-zE.js";import"./heroicons-CTwCrMww.js";import"./menu-BcEDE3vj.js";import"./portal-CZK08gWH.js";import"./transition-Cw_pkg33.js";function G({grades:i,registrationStatus:h}){const[r,p]=a.useState(""),[o,d]=a.useState(""),[n,c]=a.useState(null),[t,f]=a.useState(h.is_open),x=i.find(s=>s.id===parseInt(r)),m=x?.sections||[],l=m.find(s=>s.id===parseInt(o));a.useEffect(()=>{d("")},[r]);const b=s=>{t&&(c(s),j.post(`/registrar/promotion/${s}/promote`,{},{preserveScroll:!0,onFinish:()=>c(null),onSuccess:()=>{},onError:g=>{alert(Object.values(g).join(`
`)||"Promotion failed")}}))};return e.jsxs(y,{children:[e.jsx(u,{title:"Student Promotion"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-navy-900",style:{color:"#0F172A"},children:"üéì Student Promotion"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Register eligible students for the next grade level."})]}),e.jsx("div",{className:`mb-8 p-6 rounded-xl border-2 transition-all ${t?"bg-emerald-50 border-emerald-200":"bg-red-50 border-red-200"}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-3xl",children:t?"üü¢":"üî¥"}),e.jsxs("div",{children:[e.jsxs("h2",{className:`text-xl font-bold ${t?"text-emerald-800":"text-red-800"}`,children:["Registration is ",t?"OPEN":"CLOSED"]}),e.jsx("p",{className:"text-sm text-gray-600",children:t?"Promotion is currently active. You can promote eligible students.":"Registration is currently closed by the Director"})]})]})})}),e.jsxs("div",{className:"mb-8 bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col md:flex-row md:items-end space-y-4 md:space-y-0 md:space-x-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Select Grade"}),e.jsxs("select",{value:r,onChange:s=>p(s.target.value),className:"w-full rounded-xl border-gray-200 shadow-sm focus:border-blue-500 focus:ring-blue-500 transition-all font-medium py-3",children:[e.jsx("option",{value:"",children:"-- Choose Grade --"}),i.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Select Section"}),e.jsxs("select",{value:o,onChange:s=>d(s.target.value),disabled:!r,className:`w-full rounded-xl border-gray-200 shadow-sm focus:border-blue-500 focus:ring-blue-500 transition-all font-medium py-3 ${r?"":"bg-gray-50 opacity-60"}`,children:[e.jsx("option",{value:"",children:"-- Choose Section --"}),m.map(s=>e.jsxs("option",{value:s.id,children:["Section ",s.name]},s.id))]})]})]}),l?e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-100 flex items-center justify-between",children:e.jsxs("h3",{className:"text-lg font-bold text-navy-900",children:[x.name," - Section ",l.name,e.jsxs("span",{className:"ml-3 text-xs font-medium text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[l.students.length," Students"]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider bg-white",children:[e.jsx("th",{className:"px-6 py-4",children:"Student Name"}),e.jsx("th",{className:"px-6 py-4",children:"Student ID"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Final Avg"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.students.length>0?l.students.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"font-semibold text-navy-900",children:s.name})}),e.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-600",children:s.student_id}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsxs("span",{className:`px-2 py-1 rounded text-xs font-bold ${s.average>=50?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:[s.average,"%"]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>b(s.id),disabled:!t||!s.is_eligible||s.is_promoted||n===s.id,className:`px-4 py-2 rounded-lg text-sm font-bold transition-all ${t&&s.is_eligible&&!s.is_promoted?"bg-blue-600 text-white hover:bg-blue-700 shadow-md hover:shadow-lg active:scale-95":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:n===s.id?"Registering...":s.is_promoted?"Registered":"Register"})})]},s.id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:"4",className:"px-6 py-12 text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ü§∑‚Äç‚ôÇÔ∏è"}),e.jsx("div",{className:"text-gray-500 font-medium italic text-lg",children:"No students found in this section."})]})})})]})})]}):e.jsxs("div",{className:"text-center py-20 bg-gray-50/50 rounded-3xl border-2 border-dashed border-gray-200",children:[e.jsx("div",{className:"text-5xl mb-4 opacity-40",children:"üìù"}),e.jsx("h3",{className:"text-xl font-bold text-gray-400",children:"Please select both Grade and Section"}),e.jsx("p",{className:"text-gray-400 max-w-xs mx-auto mt-2",children:"Choose the target class and section above to view the student list for promotion."})]}),!t&&e.jsxs("div",{className:"mt-8 p-4 bg-amber-50 border border-amber-200 rounded-lg text-amber-800 text-sm flex items-center space-x-3",children:[e.jsx("span",{className:"text-xl",children:"‚ö†Ô∏è"}),e.jsx("p",{children:"Registration is currently closed by the Director"})]})]})}export{G as default};
