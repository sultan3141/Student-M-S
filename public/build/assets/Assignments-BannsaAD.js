import{j as e}from"./app-PKZgXky8.js";import{r as m,b as C,H as F,a as k,d as D}from"./inertia-Clk-cdek.js";import{D as T}from"./DirectorLayout-DZz_RmC-.js";import{P as j}from"./PrimaryButton-CFlfoQEL.js";import{S as R}from"./SecondaryButton-f-soQzrt.js";import{M as $}from"./Modal-CFJcLhF6.js";import{I as l}from"./InputLabel-BNnb9qF1.js";import{I as d}from"./TextInput-B17ELuH2.js";import{x as q,Z as E,I as p,H as G,K as B}from"./heroicons-CTwCrMww.js";import"./vendor-DNWpyu2A.js";/* empty css            */import"./Footer-Cj0b0wi-.js";import"./menu-BcEDE3vj.js";import"./portal-CZK08gWH.js";import"./transition-Cw_pkg33.js";import"./dialog-nL0D7On1.js";function ee({teachers:x,grades:f,subjects:b,academicYears:h}){const[v,c]=m.useState(!1),[N,o]=m.useState([]),[n,u]=m.useState(null),{data:i,setData:r,post:_,processing:g,errors:t,reset:y}=C({teacher_id:"",subject_id:"",grade_id:"",section_id:"",academic_year_id:h[0]?.id||""}),w=async s=>{if(r("grade_id",s),r("section_id",""),s)try{const a=await k.get(`/director/grades/${s}/sections`);o(a.data)}catch(a){console.error("Error fetching sections:",a),o([])}else o([])},S=s=>{s.preventDefault(),_(route("director.teacher.assign"),{onSuccess:()=>{y(),c(!1),o([])}})},A=s=>{n===s?D.delete(route("director.teacher.assignment.remove",s),{onSuccess:()=>u(null)}):u(s)};return e.jsxs(T,{children:[e.jsx(F,{title:"Teacher Assignments"}),e.jsx("div",{className:"bg-gradient-to-br from-[#1E40AF] to-[#3B82F6] shadow-lg mb-8 -mx-4 sm:-mx-6 lg:-mx-8 px-4 sm:px-6 lg:px-8 py-10",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-4xl font-bold text-white tracking-tight mb-2",children:"ðŸ‘¨â€ðŸ« Teacher Assignments"}),e.jsx("p",{className:"text-blue-100 text-lg",children:"Bind teachers to specific grades, sections, and subjects"})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs(j,{onClick:()=>c(!0),children:[e.jsx(q,{className:"w-5 h-5 mr-2"}),"Assign Teacher"]})}),e.jsx("div",{className:"space-y-6",children:x.map(s=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s.name}),e.jsx("p",{className:"text-gray-600",children:s.email}),s.employee_id&&e.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",s.employee_id]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Assignments"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:s.assignments.length})]})]}),s.assignments.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.assignments.map(a=>e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border-l-4 border-blue-500",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(E,{className:"w-5 h-5 text-blue-500 mr-2"}),e.jsx("span",{className:"font-semibold text-gray-900",children:a.subject})]}),e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(p,{className:"w-4 h-4 text-gray-500 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:a.grade})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"w-4 h-4 text-gray-500 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:a.section})]})]}),e.jsx("button",{onClick:()=>A(a.id),className:`ml-2 p-1 rounded transition-colors ${n===a.id?"bg-red-100 text-red-700 hover:bg-red-200":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:n===a.id?"Click again to confirm":"Remove assignment",children:e.jsx(B,{className:"w-4 h-4"})})]})},a.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(p,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No assignments yet"})]})]},s.id))}),e.jsx($,{show:v,onClose:()=>c(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Assign Teacher to Class"}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"teacher_id",value:"Teacher"}),e.jsxs("select",{id:"teacher_id",value:i.teacher_id,onChange:s=>r("teacher_id",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Teacher"}),x.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.email,")"]},s.id))]}),e.jsx(d,{message:t.teacher_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"subject_id",value:"Subject"}),e.jsxs("select",{id:"subject_id",value:i.subject_id,onChange:s=>r("subject_id",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Subject"}),b.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.code,")"]},s.id))]}),e.jsx(d,{message:t.subject_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"grade_id",value:"Grade"}),e.jsxs("select",{id:"grade_id",value:i.grade_id,onChange:s=>w(s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Grade"}),f.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(d,{message:t.grade_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"section_id",value:"Section"}),e.jsxs("select",{id:"section_id",value:i.section_id,onChange:s=>r("section_id",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,disabled:!i.grade_id,children:[e.jsx("option",{value:"",children:"Select Section"}),N.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(d,{message:t.section_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"academic_year_id",value:"Academic Year"}),e.jsxs("select",{id:"academic_year_id",value:i.academic_year_id,onChange:s=>r("academic_year_id",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:!0,children:[e.jsx("option",{value:"",children:"Select Academic Year"}),h.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(d,{message:t.academic_year_id,className:"mt-2"})]}),e.jsx(d,{message:t.assignment,className:"mt-2"}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx(R,{onClick:()=>c(!1),children:"Cancel"}),e.jsx(j,{type:"submit",disabled:g,children:g?"Assigning...":"Assign Teacher"})]})]})]})})]})}export{ee as default};
