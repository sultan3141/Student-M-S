import{j as e}from"./app-BrpLVVx-.js";import{D as m}from"./DirectorLayout-CcGb8YMq.js";import{b as g,r as j,H as u}from"./inertia-Clk-cdek.js";import{V as N,W as f}from"./heroicons-CTwCrMww.js";import"./vendor-DNWpyu2A.js";/* empty css            */import"./Footer-COinO4S5.js";import"./menu-BcEDE3vj.js";import"./portal-CZK08gWH.js";import"./transition-Cw_pkg33.js";function F({academicYear:l,matrix:t,error:a}){const{post:r,processing:d}=g({}),[i,n]=j.useState(null);if(a)return e.jsx(m,{children:e.jsx("div",{className:"p-8 text-center text-red-600 font-semibold bg-red-50 rounded-lg",children:a})});const c=(s,x,h)=>{const p=h==="open"?"closed":"open";n(`${s}-${x}`),r(route("director.semesters.update"),{data:{grade_id:s,semester:x,status:p},preserveScroll:!0,onFinish:()=>n(null)})};return e.jsxs(m,{children:[e.jsx(u,{title:"Semester Control"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Semester Status Control"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Academic Year: ",e.jsx("span",{className:"font-semibold text-blue-600",children:l.name})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border-l-4 border-blue-500 rounded",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3 flex-1",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("span",{className:"font-semibold",children:"OPEN:"})," Teachers can enter and edit marks. Students cannot view results.",e.jsx("br",{}),e.jsx("span",{className:"font-semibold",children:"CLOSED:"})," Marks are locked. Teachers can only view. Students can view their results."]})})]})})]}),e.jsx("div",{className:"bg-white shadow-xl ring-1 ring-gray-900/5 rounded-xl overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-4 pl-6 pr-3 text-left text-sm font-bold text-gray-900",children:"Grade"}),e.jsx("th",{scope:"col",className:"px-3 py-4 text-center text-sm font-bold text-gray-900",children:"Semester 1"}),e.jsx("th",{scope:"col",className:"px-3 py-4 text-center text-sm font-bold text-gray-900",children:"Semester 2"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:t.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"whitespace-nowrap py-5 pl-6 pr-3 text-sm font-semibold text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 flex-shrink-0 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold",children:s.grade.level})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"font-medium text-gray-900",children:s.grade.name})})]})}),e.jsx("td",{className:"px-3 py-5",children:e.jsx(o,{status:s.semester_1.status,stats:s.semester_1.stats,isUpdating:i===`${s.grade.id}-1`,onToggle:()=>c(s.grade.id,1,s.semester_1.status)})}),e.jsx("td",{className:"px-3 py-5",children:e.jsx(o,{status:s.semester_2.status,stats:s.semester_2.stats,isUpdating:i===`${s.grade.id}-2`,onToggle:()=>c(s.grade.id,2,s.semester_2.status)})})]},s.grade.id))})]})})]})]})}function o({status:l,stats:t,isUpdating:a,onToggle:r}){const d=l==="open";return e.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("button",{onClick:r,disabled:a,className:`
                        group relative inline-flex items-center px-4 py-2 rounded-lg font-semibold text-sm transition-all duration-200 shadow-sm
                        ${d?"bg-green-500 hover:bg-green-600 text-white":"bg-red-500 hover:bg-red-600 text-white"}
                        ${a?"opacity-50 cursor-wait":"cursor-pointer hover:shadow-md"}
                    `,children:d?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"OPEN"]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),"CLOSED"]})})}),t&&e.jsx("div",{className:"w-full max-w-xs",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-gray-500",children:"Students:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:t.students})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-gray-500",children:"Assessments:"}),e.jsx("span",{className:"font-semibold text-gray-900",children:t.assessments})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-gray-500",children:"Marks:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:[t.marks_entered,"/",t.total_possible]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-gray-500",children:"Complete:"}),e.jsxs("span",{className:`font-bold ${t.completion_rate>=80?"text-green-600":t.completion_rate>=50?"text-yellow-600":"text-red-600"}`,children:[t.completion_rate,"%"]})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all ${t.completion_rate>=80?"bg-green-500":t.completion_rate>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${t.completion_rate}%`}})})})]})})]})}export{F as default};
